<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="puppet_class_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-Autofs+Puppet+Module">Autofs Puppet Module</h1>

<p><a href="https://travis-ci.org/dhollinger/autofs-puppet"><img
src="https://travis-ci.org/dhollinger/autofs-puppet.svg?branch=master"></a>
<a href="https://forge.puppetlabs.com/dhollinger/autofs"><img
src="https://img.shields.io/puppetforge/v/dhollinger/autofs.svg"></a></p>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#description">Description - - What the module does and why it is
useful</a></p>
</li><li>
<p><a href="#setup">Setup - The basics of getting started with Autofs</a></p>
</li><li>
<p><a href="#the-module-manages-the-following">The module manages the
following</a></p>
</li><li>
<p><a href="#requirements">Requirements</a></p>
</li><li>
<p><a href="#incompatibilities">Incompatibilities</a></p>
</li><li>
<p><a href="#usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#limitations">Limitations - OS compatibility, etc</a></p>
</li><li>
<p><a href="#development">Development - Guide for contributing to the
module</a></p>
</li><li>
<p><a href="#support">Support - When you need help with this module</a></p>
</li></ol>

<h2 id="label-Description">Description</h2>

<p>The Autofs module is a Puppet module for managing the configuration of
automount network file system. This is a global module designed to be used
by any organization. This module assumes the use of Hiera to set variables
and serve up configuration files.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-The+Module+manages+the+following-3A">The Module manages the following:</h3>
<ul><li>
<p>Autofs package</p>
</li><li>
<p>Autofs service</p>
</li><li>
<p>Autofs Configuration File (/etc/auto.master)</p>
</li><li>
<p>Autofs Map Files (i.e. /etc/auto.home)</p>
</li></ul>

<h3 id="label-Requirements">Requirements</h3>
<ul><li>
<p>The <a href="https://forge.puppetlabs.com/puppetlabs/stdlib">stdlib</a>
Puppet Library</p>
</li><li>
<p>The <a href="https://github.com/puppetlabs/puppetlabs-concat">concat</a>
Puppet Module</p>
</li></ul>

<h3 id="label-Usage">Usage</h3>

<p>The module includes a single class:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_autofs'>autofs</span>
</code></pre>

<p>By default this installs and starts the autofs service with the default
master file. No parameters exist yet, but are in active development to
allow for more granular control.</p>

<p>To manage the service, use the following code in your profile:</p>

<pre class="code ruby"><code class="ruby">class { &#39;autofs&#39;:
  service_enable =&gt; false,
  service_ensure =&gt; &#39;stopped&#39;
}</code></pre>

<h3 id="label-Map+Files">Map Files</h3>

<p>To setup the Autofs Map Files, there is a defined type that can be used:
<code>puppet autofs::mount { &#39;home&#39;:   mount       =&gt;
&#39;/home&#39;,   mapfile     =&gt; &#39;/etc/auto.home&#39;,  
mapcontents =&gt; [&#39;*
-user,rw,soft,intr,rsize=32768,wsize=32768,tcp,nfsvers=3,noacl
server.example.com:/path/to/home/shares&#39;],   options     =&gt;
&#39;--timeout=120&#39;,   order       =&gt; 01 } </code> This will
generate content in both the auto.master file and a new auto.home map file:</p>

<h5 id="label-auto.master">auto.master</h5>

<pre class="code ruby"><code class="ruby">/home /etc/auto.home --timeout=120</code></pre>

<h5 id="label-auto.home">auto.home</h5>

<pre class="code ruby"><code class="ruby">* -user,rw,soft,intr,rsize=32768,wsize=32768,tcp,nfsvers=3,noacl server.example.com:/path/to/home/shares</code></pre>

<p>The defined type requires all parameters, except direct and execute, to
build the autofs config. The direct and execute parameters allow for the
creation of indirect mounts, see the Parameters section for more
information on the defaults for direct and execute.</p>

<p>In hiera, there&#39;s a <code>autofs::mounts</code> class you can
configure, for example: <code>yaml --- autofs::mounts:   home:     mount:
&#39;/home&#39;     mapfile: &#39;/etc/auto.home&#39;     mapcontents:     
- &#39;* -user,rw,soft,intr,rsize=32768,wsize=32768,tcp,nfsvers=3,noacl
server.example.com:/path/to/home/shares&#39;     options:
&#39;--timeout=120&#39;     order: 01 </code></p>

<h5 id="label-Direct+Map+-2F-+arugment">Direct Map <code>/-</code> arugment</h5>

<p>The autofs module also supports the use of the built in autofs
<code>/-</code> argument used with Direct Maps.</p>

<h6 id="label-Examples-3A">Examples:</h6>

<p>Define: <code>puppet autofs::mount { &#39;foo&#39;:   mount       =&gt;
&#39;/-&#39;,   mapfile     =&gt; &#39;/etc/auto.foo&#39;,   mapcontents
=&gt; [&#39;/foo -o options /bar&#39;],   options     =&gt;
&#39;--timeout=120&#39;,   order       =&gt; 01 } </code></p>

<p>Hiera: <code>yaml --- autofs::mounts:   foo:     mount: &#39;/-&#39;    
mapfile: &#39;/etc/auto.foo&#39;     mapcontents:       - &#39;/foo -o
options /bar&#39;     options: &#39;--timeout=120&#39;     order: 01
</code></p>

<h5 id="label-Autofs+-2Bdir-3A+options">Autofs <code>+dir:</code> options</h5>

<p>The autofs module now supports the use of the <code>+dir:</code> option in
the auto.master. This option is 100% functional, but does require some work
to simplify it.</p>

<h6 id="label-Usage">Usage</h6>

<p>Define: <code>puppet autofs::mount { &#39;home&#39;:   mount       =&gt;
&#39;/home&#39;,   mapfile     =&gt; &#39;/etc/auto.home&#39;,  
mapcontents =&gt; [&#39;*
-user,rw,soft,intr,rsize=32768,wsize=32768,tcp,nfsvers=3,noacl
server.example.com:/path/to/home/shares&#39;],   options     =&gt;
&#39;--timeout=120&#39;,   order       =&gt; 01,   use_dir     =&gt; true }
</code></p>

<p>Hiera: <code>yaml --- autofs::mounts:   home:     mount: &#39;/home&#39;   
mapfile: &#39;/etc/auto.home&#39;     mapcontents:       - &#39;*
-user,rw,soft,intr,rsize=32768,wsize=32768,tcp,nfsvers=3,noacl
server.example.com:/path/to/home/shares&#39;     options:
&#39;--timeout=120&#39;     order: 01     use_dir: true </code></p>

<h2 id="label-Reference">Reference</h2>

<h4 id="label-Parameters">Parameters</h4>
<ul><li>
<p><strong>mount_name</strong> - This is a logical, descriptive name for what
what autofs will be mounting. This is represented by the “home:” and “tmp:”
entries above.</p>
</li><li>
<p><strong>mount</strong> - This Mapping describes where autofs will be
mounting to. This map entry is referenced by concat as part of the
generation of the /etc/auto.master file.</p>
</li><li>
<p><strong>mapfile</strong> - This Mapping describes the name and path of the
autofs map file. This mapping is used in the auto.master generation, as
well as generating the map file from the auto.map.erb template. This
parameter is no longer required.</p>
</li><li>
<p><strong>mapcontent</strong> - This Mapping describes the folders that will
be mounted, the mount options, and the path to the remote or local share to
be mounted. Used in mapfile generation.</p>
</li><li>
<p><strong>options</strong> - This Mapping describes the auto.master options
to use (if any) when mounting the automounts.</p>
</li><li>
<p><strong>order</strong> - This Mapping describes where in the auto.master
file the entry will be placed. Order CANNOT be duplicated.</p>
</li><li>
<p><strong>master</strong> - This Parameter sets the path to the auto.master
file. Defaults to <code>/etc/auto.master</code>.</p>
</li><li>
<p><strong>map_dir</strong> - This Parameter sets the path to the Autofs
configuration directory for map files. Applies only to autofs 5.0.5 or
later. Defaults to <code>/etc/auto.master.d</code>.</p>
</li><li>
<p><strong>use_dir</strong> - This Parameter tells the module if it is going
to use $map_dir. Defaults to <code>false</code>.</p>
</li><li>
<p><strong>direct</strong> - Boolean to allow for indirect map. Defaults to
true to be backwards compatible.</p>
</li><li>
<p><strong>execute</strong> - Boolean to set the map to be executable.
Defaults to false to be backward compatible.</p>
</li><li>
<p><strong>replace</strong> - Boolean to set the map file to not be replaced.
Defaults to true as Puppet File resource does.</p>
</li></ul>

<h2 id="label-Limitations">Limitations</h2>

<h4 id="label-Operating+Systems">Operating Systems</h4>
<ul><li>
<p>Supported</p>
<ul><li>
<p>Ubuntu 14.04/16.04</p>
</li><li>
<p>CentOS/RHEL/Oracle Linux 6.x/7.x</p>
</li></ul>
</li><li>
<p>Self Support - should work, support not provided by developer</p>
<ul><li>
<p>Solaris 10, 11</p>
</li><li>
<p>Debian 7, 8</p>
</li><li>
<p>Fedora 23, 24</p>
</li></ul>
</li><li>
<p>Unsupported</p>
<ul><li>
<p>Windows (Autofs not available)</p>
</li><li>
<p>Mac OS X (Autofs Not Available)</p>
</li></ul>
</li></ul>

<h2 id="label-Development">Development</h2>

<p>Please see the <a href="CONTRIBUTING.md">CONTRIBUTING.md</a> file for
instructions regarding development environments and testing.</p>

<h2 id="label-Support">Support</h2>

<p>David Hollinger: <a
href="mailto:david.hollinger@moduletux.com">david.hollinger@moduletux.com</a></p>
</div></div>

      <div id="footer">
  Generated on Sun Nov 27 23:16:14 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>